<!DOCTYPE html>
<html lang="en">
<head>

  <style>

    html, body {
  margin: 20px;       /* margin outside the body */
  padding: 20px;      /* padding inside the body */
}
    body {
padding: 20px;
margin: 20px;
      background-color: #202020 !important;;
    }
    :root {
  --primary-color: #022a49; /* dark blue for dark mode */
}

body.light-mode {
  --primary-color: #1b1b1b; /* light gray for light mode */
}

    body {
  background: white;
  color: black;
  transition: background 0.3s ease, color 0.3s ease;
}

        
.jw-strip__content {
  padding: 0 !important;
  margin: 0 auto !important;
  max-width: 100% !important;
}
    #scrolld {
      transform: rotate(180deg);
    }

    ::-webkit-scrollbar-corner {
    background: transparent;
}
.jw-mobile-menu.jw-mobile-is-text.js-mobile-menu {
    display: none;
}
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #202020;
      color: white;
      padding: 0px;
      transition: all 0.3s ease;
      overflow-y: scroll; /* Ensure that the body can scroll */ 
    }

    .buttons-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
      wrap
    }

     #fileNameInput {
  height: 27px; /* Match other buttons */
  padding: 0 10px;
  font-size: .8em;
  border-radius: 5px;
  color: black;
  background-color: whitesmoke;
  border: 1.5px var(--primary-color); /* Outer border */
  box-shadow: inset 0 0 5px silver; /* Inner border effect */
  display: inline-flex;
  transition: all 0.3s ease;
    }

    button {
  height: 27px; /* Match other buttons */
  padding: 0 10px;
  font-size: .8em;
  border-radius: 5px;
  text-align: center;
  color: whitesmoke;
  background-color: var(--primary-color);
  border: 1.5px solid whitesmoke; /* Outer border */
  box-shadow: inset 0 0 5px silver; /* Inner border effect */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;

    }

    #screen1, #screen2 {
  padding: 12px 20px;  /* Add padding to ensure spacing between content and border */
  position: fixed;
  top: 10px;
  border: 1.5px solid whitesmoke;
  box-shadow: inset 0 0 5px silver; 
  font-size: 12px; /* Same font size as the arrow buttons */
  height: 30px; /* Set the height similar to the arrow buttons */
  width: fit-content; /* Set the width similar to the arrow buttons */
  border-radius: 5%; /* Make it round to resemble an 'X' shape button */
  cursor: pointer;
  z-index: 10000;
  display: flex;
  align-items: center; /* Center the content vertically */
  justify-content: center; /* Center the content horizontally */
  transition: all 0.3s ease;
    }

    #screen1 {
       right: 6.5%;
  background-color: var(--primary-color);
  color: white;
    }

    #screen2 {
       right: 3.5%;
  color: var(--primary-color);
  background-color: white;
    }

    #mode-toggle {
         position: fixed;
        cursor: pointer;
        z-index: 10000;
        align-items: center;
        display: flex;
        justify-content: center;
        transition: all 0.3s ease;
      }
      
  #toggleSyncScroll {
  padding: 12px 20px;  /* Add padding to ensure spacing between content and border */
  position: fixed;
  top: 10px;
  background-color: var(--primary-color); /* Same blue as the arrow buttons */
  color: whitesmoke;
  border: 1.5px solid whitesmoke;
  box-shadow: inset 0 0 5px silver; 
  font-size: 12px; /* Same font size as the arrow buttons */
  height: 30px; /* Set the height similar to the arrow buttons */
  width: fit-content; /* Set the width similar to the arrow buttons */
  border-radius: 5%; /* Make it round to resemble an 'X' shape button */
  cursor: pointer;
  z-index: 10000;
  display: flex;
  align-items: center; /* Center the content vertically */
  justify-content: center; /* Center the content horizontally */
  transition: all 0.3s ease;
    }

.close-button {
  padding: 12px 20px;  /* Add padding to ensure spacing between content and border */
  position: fixed;
  top: 10px;
  right: 9.5%; /* Adjusted position */
  background-color: var(--primary-color); /* Same blue as the arrow buttons */
  color: whitesmoke;
  border: 1.5px solid whitesmoke;
  box-shadow: inset 0 0 5px silver; 
  font-size: 12px; /* Same font size as the arrow buttons */
  height: 30px; /* Set the height similar to the arrow buttons */
  width: fit-content; /* Set the width similar to the arrow buttons */
  border-radius: 5%; /* Make it round to resemble an 'X' shape button */
  cursor: pointer;
  z-index: 10000;
  display: flex;
  align-items: center; /* Center the content vertically */
  justify-content: center; /* Center the content horizontally */
  transition: all 0.3s ease;
}

    .scroll-buttons {
  display: fixed;
  flex-direction: column;
  position: fixed;  /* Ensures the scroll buttons are always fixed */
  top: 1%;
  z-index: 9999;  /* Keeps the buttons above other content */
  cursor: move;
  align-items: center; /* Center the content vertically */
  justify-content: center;
}

    .fullscreen .scroll-buttons {
  align-items: center; /* Center the content vertically */
  justify-content: center;
  position: fixed; /* Keeps scroll buttons in fixed position during fullscreen */
  top: 1%;
  right: 1%;
  z-index: 9999;
}

/* Fullscreen Mode Adjustment */
.fullscreen .scroll-buttons {
  align-items: center; /* Center the content vertically */
  justify-content: center;
  position: fixed;  /* Keeps scroll buttons in fixed position during fullscreen */
  top: 1%;        /* You can adjust top, right as needed */
  right: 1%;
  z-index: 9999;    /* Keeps them on top */
}

/* Button Styles */
.scroll-buttons button {
  background-color: var(--primary-color); /* Same blue as the arrow buttons */
  color: whitesmoke;
  border: 1.5px solid whitesmoke;
  box-shadow: inset 0 0 5px silver; 
  cursor: default;
  z-index: 10000;
  display: flex;
  width: 30px;
  height: 30px;
  border-radius: 5px;
  font-size: 18px;
  outline: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-bottom: 10px;
  align-items: center; /* Center the content vertically */
  justify-content: center;
}

.scroll-buttons button:hover {
  background-color: #025474;
}

    .close-button:hover, #toggleSyncScroll:hover, #screen1:hover, #screen2:hover {
      background-color: #025474 !important;
    }

    /* Show selects only for desktop */
        @media (min-width: 769px) { 
      #mode-toggle {
          top: 6px;
          height: auto;
          width: 2%;
          right: 17.9%; 
      }
          
           .scroll-buttons {
           right: 1.5%;  /* Keeps it within view */
 
         }
          .close-button {
            right: 9.5%; 
          }
        #toggleSyncScroll {
            right: 13.2%; 
          }
        #screen1 {
            right: 6.5%;
          }
        #screen2 {
            right: 3.5%;
          }
                  .fullscreen .editor-container {
           padding-top: 2%;
        }
    }

      /* Show phone dropdown on mobile */
        @media (max-width: 768px) {

      #mode-toggle {
          top: 10px;
          height: auto;
          width: 8%;
          right: 87.5%; 
      }
          
           .scroll-buttons {
            right: 5%;  /* Keeps it within view */
          }
          .close-button {
            right: 45.5%; 
          }
        #toggleSyncScroll {
           right: 64%; 
          }
        #screen1 {
           right: 30.5%;
          }
        #screen2 {
           right: 15.5%;
          }
        .fullscreen .editor-container {
           padding-top: 10%;
        }
        }

    @media (min-width: 769px) and (max-width: 1024px) {
       #mode-toggle {
          top: 6px;
          height: auto;
          width: 3.5%;
          right: 34%; 
      }
  .close-button {
    right: 18%; /* Adjust the position for tablet */
  }
  #toggleSyncScroll {
    right: 25%; /* Adjust the position for tablet */
  }
  #screen1 {
    right: 12%; /* Adjust the position for tablet */
  }
  #screen2 {
    right: 6%; /* Adjust the position for tablet */
  }
  .fullscreen .editor-container {
    padding-top: 25%; /* Adjust padding for tablets */
  }
}
    button:hover {
      background-color: var(--primary-color);
    }
    #languageSelect, #saveFile, #fontSizeSelect {
  height: 27px; /* Match other buttons */
  padding: 0 10px;
  font-size: .8em;
  border-radius: 5px;
  text-align: center;
  color: whitesmoke;
  background-color: var(--primary-color);
  border: 1.5px solid whitesmoke; /* Outer border */
  box-shadow: inset 0 0 5px silver; /* Inner border effect */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;

}

#languageSelect option, #saveFile option, #fontSizeSelect {
  padding: 5px;  /* Adjust padding for the options inside the select */
}

#fileSelect {
  height: 27px; /* Match other buttons */
  padding: 0 10px;
  font-size: .8em;
  border-radius: 5px;
  text-align: center;
  color: whitesmoke;
  background-color: var(--primary-color);
  border: 1.5px solid whitesmoke; /* Outer border */
  box-shadow: inset 0 0 5px silver; /* Inner border effect */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

    /* Make the editor full screen in regular mode */
.editor-container {
      display: flex;
      width: 100%;
      height: auto;
      position: relative;
      overflow-x: auto;
      overflow-y: hidden;
}

/* When in compare mode, do NOT make the editor full screen */
.compare-mode .editor-container {
    display: flex;
    flex-direction: row; /* Ensure side-by-side layout */
    align-items: stretch; /* Make both editors take equal height */
    height: 100vh; /* Full viewport height */
    overflow: hidden; /* Prevent unnecessary scrolling */
}

    #lineNumbers {
      background-color: #333;
      padding: 10px;
      width: auto;
      text-align: right;
      font-family: monospace;
      color: #ccc;
      line-height: 20px;
      user-select: none;
      overflow: hidden;
      position: relative;
      white-space: nowrap;
    }
.textarea-wrapper {
    flex: 1;
    display: flex;
    flex-direction: row; /* Side by side in compare mode */
    overflow: hidden; /* Prevents overflowing */
}



/* Fullscreen specific styles */
.fullscreen #inputText, .fullscreen #compareText {
    height: 100%; /* Full height */
}

    #inputText, #compareText {
      flex: 1;
      background-color: #222;
      color: white;
      border: none;
      font-family: monospace;
      font-size: 16px;
      padding: 10px;
      line-height: 20px;
      resize: none;
      outline: none;
      overflow-x: auto;
      overflow-y: hidden;
      white-space: pre;
      width: 100%;
      min-height: 400px;
      transition: all 0.3s ease;
}

.compare-mode #inputText,
.compare-mode #compareText {
    flex: 1;
    background-color: #222;
    color: white;
    border: none;
    font-family: monospace;
    font-size: 16px;
    padding: 10px;
    line-height: 20px;
    resize: none;
    outline: none;
    border: none;
    height: calc(100vh - 50px); /* Make sure it doesn't overflow */
    overflow-y: auto; /* Enable normal scrolling */
}

     #compareText, #compareTexts{
        display: none; /* Initially hide compareText */
    }

    #compareModeSection {
      display: none;
      margin-top: 20px;
    }

    #compareResult {
      margin-top: 10px;
      padding: 10px;
      background-color: #333;
      border: 1px solid #666;
    }

.fullscreen #inputText, 
.fullscreen #compareText {
  overflow: auto !important;
}

    .fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #1e1e1e;
      display: flex;
      z-index: 9999;
      padding: 0px;
       overflow: auto !important;
    }

    .fullscreen #inputText {
      height: calc(100%);
      width: 100%;
      resize: none;
      overflow: auto;
    }

    .fullscreen .editor-container {
      overflow: hidden;
    }

    #outputFrame {
      width: 100%;
      height: 400px;
      margin-top: 20px;
      border: 1px solid #ccc;
    }

    #livePreview {
      display: none;
      margin-top: 20px;
    }

/* Fullscreen specific adjustment */
.fullscreen #inputText, .fullscreen #compareText {
  height: 100%;
  width: 100%; /* Ensure it takes up full screen in fullscreen mode */
  resize: none;
  border: whitesmoke;
}

    #inputText::-webkit-scrollbar-corner,
#compareText::-webkit-scrollbar-corner {
  background: transparent; /* Removes the white box */
}


/* Custom scrollbar styling */
#inputText::-webkit-scrollbar, #compareText::-webkit-scrollbar {
  width: 10px; /* Make the scrollbar small */
  height: 10px;
    cursor: default; /* Ensures the cursor is the arrow when hovering over the scrollbar */
}

#inputText::-webkit-scrollbar-thumb, #compareText::-webkit-scrollbar-thumb {

  background-color: #555; /* Scrollbar thumb color */
  border-radius: 4px;
    cursor: default; /* Ensures the cursor is the arrow when hovering over the scrollbar */
}

#inputText::-webkit-scrollbar-thumb:hover, #compareText::-webkit-scrollbar-thumb:hover {

  background-color: #888; /* Hover color */
    cursor: default; /* Ensures the cursor is the arrow when hovering over the scrollbar */
}

#inputText::-webkit-scrollbar-track, #compareText::-webkit-scrollbar-track {
  background: #333; /* Track color */
    cursor: default; /* Ensures the cursor is the arrow when hovering over the scrollbar */
}

    .buttons-container2 {
      flex-wrap: wrap;
          }
#inputText, #compareText {
  border: 1.5px solid whitesmoke !important;
  box-shadow: inset 0 0 5px silver !important;
  border-radius: 5px !important;
}
    .fullscreen #inputText,
.fullscreen #compareText {
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}
body {
  background: white;
  color: black;
  transition: filter 0.3s ease, background 0.3s ease, color 0.3s ease;
}

body.dark-mode {
  filter: invert(1);
  background: black;
}

img, video, iframe {
  transition: filter 0.3s ease;
}

body.dark-mode img,
body.dark-mode video,
body.dark-mode iframe {
  filter: invert(1);
}

img {
  cursor: pointer;
  max-width: 300px;
  display: block;
  margin-bottom: 20px;
}

  </style>
</head>
<script>
  let isFullscreen = false;
  let isCompareMode = false; // Track whether we are in compare mode
  let isin = true;

  function isin1() {
   const sa1 = document.getElementById('screen1');
   const sb1 = document.getElementById('screen2');
  isin = true;
  sa1.style.color = "var(--primary-color)"; 
  sb1.style.color = "white";
  sa1.style.backgroundColor = "#e4e4e4";
  sb1.style.backgroundColor = "var(--primary-color)";
}

  function isin2() {
   const sa2 = document.getElementById('screen1');
   const sb2 = document.getElementById('screen2');
  isin = false;
  sb2.style.color = "var(--primary-color)"; 
  sa2.style.color = "white";
  sb2.style.backgroundColor = "#e4e4e4";
  sa2.style.backgroundColor = "var(--primary-color)";

   }

document.addEventListener("DOMContentLoaded", function () {
    const inputText = document.getElementById("inputText");
    const compareText = document.getElementById("compareText");
    const syncScrollButton = document.getElementById("toggleSyncScroll");
    
    let syncEnabled = false; // Track sync state

    function syncScroll() {
        if (syncEnabled) {
            compareText.scrollTop = inputText.scrollTop;
            compareText.scrollLeft = inputText.scrollLeft;
        }
    }

    function syncScrollReverse() {
        if (syncEnabled) {
            inputText.scrollTop = compareText.scrollTop;
            inputText.scrollLeft = compareText.scrollLeft;
        }
    }

    // Toggle sync scrolling when the button is clicked
    syncScrollButton.addEventListener("click", function () {
        syncEnabled = !syncEnabled; // Toggle state
        syncScrollButton.textContent = syncEnabled ? "Unsync" : "Sync";
    });

    // Attach scroll event listeners
    inputText.addEventListener("scroll", syncScroll);
    compareText.addEventListener("scroll", syncScrollReverse);

    // Prevent Enter key from scrolling up in inputText
    inputText.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            const cursorPos = inputText.selectionStart;
            const value = inputText.value;
            inputText.value = value.substring(0, cursorPos) + "\n" + value.substring(cursorPos);
            inputText.selectionStart = inputText.selectionEnd = cursorPos + 1; // Move cursor to the next line
        }
    });

    // Prevent Enter key from scrolling up in compareText
    compareText.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            const cursorPos = compareText.selectionStart;
            const value = compareText.value;
            compareText.value = value.substring(0, cursorPos) + "\n" + value.substring(cursorPos);
            compareText.selectionStart = compareText.selectionEnd = cursorPos + 1; // Move cursor to the next line
            updateLineNumbers(); // Update line numbers if necessary
        }
    });
});


 // Toggle the compare mode and show/hide the compare text area
function toggleCompareMode() {
  isCompareMode = !isCompareMode;
  const compareTextArea = document.getElementById('compareText');
  const editorContainer = document.getElementById('editorContainer');
  const inputTextArea = document.getElementById('inputText');
  const compareTextButton = document.getElementById('compareTexts'); // Get the button element    
  const tog = document.getElementById('toggleCompareMode');

  // Ensure correct layout when switching modes
  if (isCompareMode) {
     document.body.classList.add("compare-mode"); // Ensure class is added
    compareTextArea.style.display = 'block'; // Show the compare textarea
    editorContainer.style.flexDirection = 'row'; // Display side-by-side
    compareTextButton.style.display = 'block'; // Show the compare texts button
    tog.style.display = 'block';
 

  } else {
    document.body.classList.remove("compare-mode"); // Ensure class is added
    compareTextArea.style.display = 'none'; // Hide the compare textarea
    compareTextButton.style.display = 'none'; // Hide the compare texts button
    document.getElementById('compareModeSection').style.display = 'none';
    tog.style.display = 'none';

  }
}


  function compareTexts() {
    const inputText = document.getElementById('inputText').value;
    const compareText = document.getElementById('compareText').value;

    const compareResult = document.getElementById('compareResult');
    
    // Check if the texts are the same or not
    if (inputText === compareText) {
      compareResult.innerHTML = "The texts are identical.";
      compareResult.style.backgroundColor = "#4CAF50"; // Green for identical
    } else {
      compareResult.innerHTML = "The texts are different.";
      compareResult.style.backgroundColor = "#f44336"; // Red for different
    }

    // Show the compare result section
    document.getElementById('compareModeSection').style.display = 'block';
  }


  function togglelanguage() {
    const lang = document.getElementById('languageSelect').value;
    const rlb = document.getElementById('runLiveBtn');

    // Show if 'html' is selected, else hide
    if (lang === 'html') {
      rlb.style.display = 'inline-block';
    } else {
      rlb.style.display = 'none';
    }
  }

 function saveFile() {
  const text = document.getElementById('inputText').value;
  const text2 = document.getElementById('compareText').value;
  const language = document.getElementById('languageSelect').value;
  const saver = document.getElementById('saveFile').value;
  const userFileName = document.getElementById('fileNameInput').value.trim();

  let fileExtension = '';
  let mimeType = '';

  // Determine file extension and MIME type
  switch (language) {
    case 'html':
      fileExtension = 'txt';
      mimeType = 'text/html';
      break;
    case 'java':
      fileExtension = 'java';
      mimeType = 'text/x-java-source';
      break;
    case 'xml':
      fileExtension = 'xml';
      mimeType = 'text/xml';
      break;
    default:
      fileExtension = 'txt';
      mimeType = 'text/plain';
  }

  const baseFileName = userFileName || 'downloaded_file'; // fallback if input is empty

  const content = saver === "down" ? text : text2;
  const suffix = saver === "downC" ? "_compare" : "";
  const blob = new Blob([content], { type: mimeType });

  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `${baseFileName}${suffix}.${fileExtension}`;
  link.click();
}

  function openFile(event) {
    const selectedOption = event.target.value;
    
    if (selectedOption === 'inputText' || selectedOption === 'compareText') {
      document.getElementById('fileInput').click();  // Opens the file input dialog
    }
  }

  // Handle the file selection and load content into the selected textarea
  function handleFileSelect(event) {
    const file = event.target.files[0];  // Get the selected file
    
    if (file) {
      const reader = new FileReader();
      const fileName = file.name;
      const fileExtension = fileName.split('.').pop().toLowerCase();  // Extract file extension
      
      reader.onload = function() {
        const content = reader.result;
        const fileselect = document.getElementById('fileSelect').value;  // Get the selected action from the dropdown

   
        // Load file content into the selected textarea
        if (fileselect === "inputText") {
          document.getElementById('inputText').value = content;
        } else if (fileselect === "compareText") {
          document.getElementById('compareText').value = content;
        }

        // Update the line numbers (if applicable, depending on your implementation)
        updateLineNumbers();

        // Update the language select dropdown based on the file extension or content
        const languageSelect = document.getElementById('languageSelect');
        
        if (fileExtension === 'html' || content.includes('<!DOCTYPE html>')) {
          languageSelect.value = 'html';
          document.getElementById('runLiveBtn').style.display = 'inline-block'; 
        } else if (fileExtension === 'java' || content.startsWith('package')) {
          languageSelect.value = 'java';
          document.getElementById('runLiveBtn').style.display = 'none'; 
        } else if (fileExtension === 'xml' || content.includes('<LinearLayout')) {
          languageSelect.value = 'xml';
          document.getElementById('runLiveBtn').style.display = 'none'; 
        } else {
          languageSelect.value = 'txt'; 
          document.getElementById('runLiveBtn').style.display = 'none'; 
        }
        document.getElementById('fileSelect').value = "";
      };

      reader.readAsText(file);  // Read the file as text
    }
  }

    
function runLiveHTML() {
  const htmlContent = document.getElementById('inputText').value;
  const outputFrame = document.getElementById('outputFrame');

  try {
    // Try writing directly to the iframe's document
    const doc = outputFrame.contentWindow.document;
    doc.open();
    doc.write(htmlContent);
    doc.close();
  } catch (e) {
    // Fallback: if cross-origin or sandbox blocks direct access,
    // load content using data URL with encoding
    outputFrame.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(htmlContent);
  }

  // Store the content but do NOT overwrite the editor's content
  originalText = htmlContent;

  // Hide the editor and show the live preview
  const editor = document.getElementById('editorContainer');
  editor.style.visibility = 'hidden';
  editor.style.height = '0';

  document.getElementById('livePreview').style.display = 'block';
  document.getElementById('showEditorBtn').style.display = 'block';
}

  function showEditor() {
    // Show the editor and hide the live preview
    document.getElementById('editorContainer').style.visibility = 'visible';
    document.getElementById('editorContainer').style.height = 'auto';
    document.getElementById('livePreview').style.display = 'none';
    document.getElementById('showEditorBtn').style.display = 'none';

    // Restore the content back into the editor
    document.getElementById('inputText').value = originalText;
    updateLineNumbers(); // Update the line numbers
  }

document.addEventListener('fullscreenchange', function () {
    // Check if the document is in fullscreen mode
    if (document.fullscreenElement) {
        // Hide the close button when in fullscreen
        closeButton.style.display = 'none'; 
    } else {
        // Show the close button when exiting fullscreen
        closeButton.style.display = 'block';
    }
});

function toggleFullscreen() {
    isFullscreen = !isFullscreen;
    const body = document.body;
    const editorContainer = document.querySelector('.editor-container');
    const ec2 = document.querySelector('.fullscreen#inputText');

    // Toggle fullscreen class on body and editor container
    body.classList.toggle('fullscreen', isFullscreen);
    editorContainer.classList.toggle('fullscreen', isFullscreen);
    ec2.classList.toggle('fullscreen', isFullscreen);



    // Handle page scroll visibility
    if (isFullscreen) {
        document.body.style.overflow = 'hidden'; // Hide body scrollbar in fullscreen
        closeButton.style.display = 'block'; // Show the close button (X) in fullscreen
         eC2.style.overflow = 'hidden';
                inputTextArea.style.overflowY = 'auto'; // Show scrollbar for input text
    compareTextArea.style.overflowY = 'auto'; // Show scrollbar for compare text

        
    } else {
        document.body.style.overflow = 'auto'; // Reset the body scrollbar to default when exiting fullscreen
        closeButton.style.display = 'none'; // Hide the close button (X) in regular mode
                eC2.style.overflow = 'auto';
        // Reset the editor container to its default behavior when exiting fullscreen
        editorContainer.style.overflow = 'auto'; // Ensure the editor container can scroll again
          inputTextArea.style.overflowY = 'hidden'; // Show scrollbar for input text
    compareTextArea.style.overflowY = 'hidden'; // Show scrollbar for compare text
    }
}


  // Scroll Up Button
  function scrollUp() {
   let editor;
    if (isin) {
      editor = document.getElementById('inputText');
    } else {
      editor = document.getElementById('compareText');
    }
    if (isFullscreen) {
      editor.scrollTop = 0;  // Scroll all the way to top in fullscreen
    } else {
    if (isCompareMode) {
     editor.scrollTop = 0;  // Scroll all the way to top in fullscreen
    } else {
      window.scrollTo(0, 0);  // Scroll all the way to top in regular mode
    }
}
  }

  // Scroll Down Button
  function scrollDown() {
   let editor;
if (isin) {
    editor = document.getElementById('inputText');
} else {
    editor = document.getElementById('compareText');
}
    if (isFullscreen) {
      editor.scrollTop = editor.scrollHeight;  // Scroll all the way to bottom in fullscreen
    } else {
   if (isCompareMode) {
      editor.scrollTop = editor.scrollHeight;  // Scroll all the way to bottom in fullscreen
    } else {
      window.scrollTo(0, document.body.scrollHeight);  // Scroll all the way to bottom in regular mode
    }
    }
  }



  // Update Line Numbers
  function updateLineNumbers() {
    const textArea = document.getElementById('inputText');
    const lineNumbers = document.getElementById('lineNumbers');
    const lines = textArea.value.split('\n').length;

    let numbersHtml = '';
    for (let i = 1; i <= lines; i++) {
      numbersHtml += i + '<br>';
    }
    lineNumbers.innerHTML = numbersHtml;
  }



function updateFontSize() {
  const fontSize = document.getElementById('fontSizeSelect').value;
  const inputText = document.getElementById('inputText');
  const compareText = document.getElementById('compareText');
  const lineNumbers = document.getElementById('lineNumbers');

  // Set the font size for both text areas
  inputText.style.fontSize = fontSize + 'px';
  compareText.style.fontSize = fontSize + 'px';
 
 

  // Update line height (usually 1.5x the font size for good readability)
  inputText.style.lineHeight = (fontSize * 1.5) + 'px';
  compareText.style.lineHeight = (fontSize * 1.5) + 'px';

  // Update the line number's line-height to match the font size
  lineNumbers.style.lineHeight = (fontSize * 1.5) + 'px';

  
  // Update line numbers if needed
  updateLineNumbers(); // You may already have this function that updates the line numbers
     lineNumbers.style.fontSize = fontSize + 'px';
  adjustLineNumbersWidth();
  toggleCompareMode();


}

  // Update live preview when content changes
  function updateLivePreview() {
    const iframe = document.getElementById('outputFrame');
    const code = document.getElementById('inputText').value;
    iframe.srcdoc = code;
  }

function adjustLineNumbersWidth() {
  const inputText = document.getElementById('inputText');
  const lineNumbers = document.getElementById('lineNumbers');
  const fontSize = parseInt(window.getComputedStyle(inputText).fontSize, 10);
  
  // Calculate the number of digits in the largest line number.
  const lines = inputText.value.split('\n').length;
  const maxLineNumberLength = lines.toString().length;
 if (maxLineNumberLength < 10) {
    maxLineNumberLength = 5;
  } else if (maxLineNumberLength > 10) {
   maxLineNumberLength = 10;
} else if (maxLineNumberLength > 20) {
  maxLineNumberLength = 15;
} else if (maxLineNumberLength > 30) {
  maxLineNumberLength = 20;
}
  
  // Adjust the width dynamically based on the number of digits in the largest line number.
  const lineNumberWidth = fontSize * maxLineNumberLength * 3; // Adjust multiplier to fine-tune the width
  
  // Set the calculated width
  lineNumbers.style.width = `${lineNumberWidth}px`;
}

  // Event listener to update line numbers and preview
  window.onload = function() {
    const textArea = document.getElementById('inputText');
    textArea.addEventListener('input', updateLineNumbers);
    textArea.addEventListener('input', function() {
      updateLineNumbers();
      updateLivePreview();
     const fontSizeSelect = document.getElementById('fontSizeSelect');
    fontSizeSelect.addEventListener('change', updateFontSize);
    });
    updateLineNumbers();

    textArea.addEventListener('scroll', function() {
      const lineNumbers = document.getElementById('lineNumbers');
      lineNumbers.scrollTop = textArea.scrollTop;
    });

    // Show "Run Live" button only when HTML is selected on page load
    const languageSelect = document.getElementById('languageSelect').value;
    if (languageSelect === 'html') {
      document.getElementById('runLiveBtn').style.display = 'inline-block';
    } else {
      document.getElementById('runLiveBtn').style.display = 'none';
    }

    // Also call togglelanguage to set initial visibility
    togglelanguage();
const saveFile = document.getElementById('saveFile').value;
  if (saveFile === "down" || saveFile === "downC") {
    saveFile();}
  };
const sunSrc = "https://primary.jwwb.nl/public/v/r/b/temp-owlvnsnjnrdsiepvniok/moon-high.png?enable-io=true&enable=upscale&crop=517%2C529%2Cx0%2Cy0%2Csafe&width=80&height=82";
const moonSrc = "https://primary.jwwb.nl/public/v/r/b/temp-owlvnsnjnrdsiepvniok/sunr-high.png?enable-io=true&enable=upscale&crop=340%2C336%2Cx0%2Cy1%2Csafe&width=80&height=79";

function toggleDarkMode() {
  const body = document.body;
  const img = document.getElementById("mode-toggle");

  const sunSrc = "https://primary.jwwb.nl/public/v/r/b/temp-owlvnsnjnrdsiepvniok/moon-high.png?enable-io=true&enable=upscale&crop=517%2C529%2Cx0%2Cy0%2Csafe&width=80&height=82";
  const moonSrc = "https://primary.jwwb.nl/public/v/r/b/temp-owlvnsnjnrdsiepvniok/sunr-high.png?enable-io=true&enable=upscale&crop=340%2C336%2Cx0%2Cy1%2Csafe&width=80&height=79";

  body.classList.toggle("dark-mode");
  body.classList.toggle("light-mode");

  if (body.classList.contains("dark-mode")) {
    img.src = sunSrc;
    img.alt = "Switch to light mode";
  } else {
    img.src = moonSrc;
    img.alt = "Switch to dark mode";
  }
}


  
</script>
<body>


  <div class="buttons-container">
    <select id="saveFile" style="-webkit-appearance: none; appearance: none;" onchange="saveFile()">
      <option value="dwn">Save</option>
      <option value="down">Original</option>
      <option value="downC">Compare</option>
    </select>

  
    
    <select id="languageSelect" style="-webkit-appearance: none; appearance: none;" onchange="togglelanguage()">
     <option value="html">HTML</option>
     <option value="java">JAVA</option>
     <option value="xml">XML</option>
     <option value="txt">TXT</option>
    </select>
    
<button id="runLiveBtn" style="display: none;" onclick="runLiveHTML()">></button>
    <button id="showEditorBtn" style="display: none;" onclick="showEditor()">Editor</button>

 
 <!-- Font Size Dropdown -->
    <select id="fontSizeSelect" style="-webkit-appearance: none; appearance: none;">
<option value="0">Font</option>
<option value="1">1px</option>
<option value="2">2px</option>
<option value="3">3px</option>
<option value="4">4px</option>
<option value="5">5px</option>
<option value="6">6px</option>
<option value="7">7px</option>
<option value="8">8px</option>
<option value="9">9px</option>
<option value="10">10px</option>
<option value="11">11px</option>
<option value="12">12px</option>
<option value="13">13px</option>
<option value="14">14px</option>
<option value="15">15px</option>
<option value="16">16px</option>
<option value="17">17px</option>
<option value="18">18px</option>
<option value="19">19px</option>
<option value="20">20px</option>
<option value="21">21px</option>
<option value="22">22px</option>
<option value="23">23px</option>
<option value="24">24px</option>
<option value="25">25px</option>
<option value="26">26px</option>
<option value="27">27px</option>
<option value="28">28px</option>
<option value="29">29px</option>
<option value="30">30px</option>
<option value="31">31px</option>
<option value="32">32px</option>
<option value="33">33px</option>
<option value="34">34px</option>
<option value="35">35px</option>
<option value="36">36px</option>
<option value="37">37px</option>
<option value="38">38px</option>
<option value="39">39px</option>
<option value="40">40px</option>
    </select>
    
<select id="fileSelect" style="-webkit-appearance: none; appearance: none;" onchange="openFile(event)">
    <option value="">File</option>
    <option value="inputText">Original</option>
    <option value="compareText">Compare</option>
</select>
   <input type="file" id="fileInput" accept=".html, .java, .xml, .txt" onchange="handleFileSelect(event)" style="display:none;" />
  </div>

    <div class="buttons-container">
          <button onclick="toggleCompareMode()">Enable Compare Mode</button> <!-- Toggle Compare Mode Button -->
      
    <button id="compareTexts" style="display: none;" onclick="compareTexts()">Compare Texts</button>
      <input type="text" id="fileNameInput" placeholder="File name">
    <div id="compareModeSection">
    <div id="compareResult"></div>

  </div>
  </div>

  <div id="editorContainer" class="editor-container">
    <div id="lineNumbers"></div>
    <textarea id="inputText" placeholder="Start typing your code here..." spellcheck="false"></textarea>
    <textarea id="compareText" placeholder="Compare with this..." spellcheck="false"></textarea>
  </div>

<div class="buttons-container2">
  <button id="closeButton" class="close-button" onclick="toggleFullscreen()">Full</button>

  <!-- Scroll Arrows -->
  <div class="scroll-buttons">
    <button id="scrollu" onclick="scrollUp()">^</button>
    <button id="scrolld" onclick="scrollDown()">^</button>
  </div>
  
    <img
  id="mode-toggle"
  src="https://primary.jwwb.nl/public/v/r/b/temp-owlvnsnjnrdsiepvniok/sunr-high.png?enable-io=true&enable=upscale&crop=340%2C336%2Cx0%2Cy1%2Csafe&width=80&height=79"
  alt="Toggle dark mode"
  onclick="toggleDarkMode()"
/>
  
  <button id="toggleSyncScroll" class="sync-button">Sync</button>
  <button id="screen1" class="screen-button" onclick="isin1()">1</button>
  <button id="screen2" class="screen-button" onclick="isin2()">2</button>
</div>



  <div id="livePreview">
    <iframe id="outputFrame" sandbox="allow-scripts" title="Live HTML Output"></iframe>

  </div>
</body>
</html>
